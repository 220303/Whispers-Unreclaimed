<Page
    x:Class="烟尘记.Options"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:烟尘记"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Option"
    d:DesignHeight="450"
    d:DesignWidth="800"
    Background="Black"
    Focusable="True"
    KeyDown="Page_KeyDown"
    Tag="all"
    mc:Ignorable="d">

    <Page.Resources>

        <!--  绿色主题颜色资源  -->
        <Color x:Key="BorderColor">#2D6A4F</Color>
        <Color x:Key="GlowColor">#FF58DCA2</Color>
        <Color x:Key="TextColor">White</Color>
        <Color x:Key="TextHoverColor">#52B788</Color>
        <Color x:Key="TextShadowColor">#95D5B2</Color>
        <Color x:Key="PressedBorderColor">#1B4332</Color>
        <Color x:Key="BackgroundColor">Black</Color>

        <!--  绿色主题画刷资源  -->
        <SolidColorBrush x:Key="BorderBrush" Color="{StaticResource BorderColor}" />
        <SolidColorBrush x:Key="TextBrush" Color="{StaticResource TextColor}" />
        <SolidColorBrush x:Key="PressedBorderBrush" Color="{StaticResource PressedBorderColor}" />
        <SolidColorBrush x:Key="BackgroundBrush" Color="{StaticResource BackgroundColor}" />


        <!--  魔法按钮样式  -->
        <Style TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <!--  背景层 - 增强光晕  -->
                            <Border
                                x:Name="BackgroundBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="2"
                                CornerRadius="4">
                                <Border.Effect>
                                    <DropShadowEffect
                                        x:Name="BorderGlow"
                                        BlurRadius="0"
                                        Opacity="0"
                                        ShadowDepth="0"
                                        Color="{StaticResource GlowColor}" />
                                </Border.Effect>
                            </Border>

                            <!--  内容层  -->
                            <Grid>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*" />
                                    <ColumnDefinition Width="4*" />
                                    <ColumnDefinition Width="1*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="1*" />
                                    <RowDefinition Height="4*" />
                                    <RowDefinition Height="1*" />
                                </Grid.RowDefinitions>

                                <Viewbox
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    Stretch="Uniform">
                                    <TextBlock
                                        x:Name="ButtonText"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        Effect="{x:Null}"
                                        FontFamily="Palatino Linotype"
                                        FontSize="18"
                                        FontWeight="Bold"
                                        Foreground="{StaticResource TextBrush}"
                                        Text="{TemplateBinding Content}" />
                                </Viewbox>

                            </Grid>

                            <!--  粒子效果层  -->
                            <Canvas x:Name="ParticleCanvas" IsHitTestVisible="False" />

                        </Grid>

                        <ControlTemplate.Triggers>
                            <!--  鼠标悬停动画  -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetName="ButtonText"
                                                Storyboard.TargetProperty="Foreground.Color"
                                                To="{StaticResource TextHoverColor}"
                                                Duration="0:0:0.5" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="BorderGlow"
                                                Storyboard.TargetProperty="BlurRadius"
                                                To="25"
                                                Duration="0:0:0.5" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="BorderGlow"
                                                Storyboard.TargetProperty="Opacity"
                                                To="1.0"
                                                Duration="0:0:0.5" />
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonText" Storyboard.TargetProperty="Effect">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{x:Null}" />
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0.5">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <DropShadowEffect
                                                            BlurRadius="12"
                                                            Opacity="0.8"
                                                            ShadowDepth="0"
                                                            Color="{StaticResource TextShadowColor}" />
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>

                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation
                                                Storyboard.TargetName="ButtonText"
                                                Storyboard.TargetProperty="Foreground.Color"
                                                To="{StaticResource TextColor}"
                                                Duration="0:0:1" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="BorderGlow"
                                                Storyboard.TargetProperty="BlurRadius"
                                                To="0"
                                                Duration="0:0:1" />
                                            <DoubleAnimation
                                                Storyboard.TargetName="BorderGlow"
                                                Storyboard.TargetProperty="Opacity"
                                                To="0"
                                                Duration="0:0:1" />
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonText" Storyboard.TargetProperty="Effect">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <DropShadowEffect
                                                            BlurRadius="12"
                                                            Opacity="0.8"
                                                            ShadowDepth="0"
                                                            Color="{StaticResource TextShadowColor}" />
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                                <DiscreteObjectKeyFrame KeyTime="0:0:1" Value="{x:Null}" />
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>

                            <!--  按下效果  -->
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="BackgroundBorder" Property="BorderBrush" Value="{StaticResource PressedBorderBrush}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>

            <Setter Property="Background" Value="{StaticResource BackgroundBrush}" />
            <Setter Property="Padding" Value="15,8" />
            <Setter Property="TextElement.Foreground" Value="{StaticResource TextBrush}" />
        </Style>

        <!--滑块数值显示转换器-->
        <local:F0FontSizeToStringConverter x:Key="F0FontSizeToStringConverter" />
        <local:F2FontSizeToStringConverter x:Key="F2FontSizeToStringConverter" />
        <local:Music_FontSizeToStringConverter x:Key="Music_FontSizeToStringConverter" />

    </Page.Resources>

    <Grid x:Name="Total_grid">

        <!--  自定义控件用于绘制边框  -->
        <local:MagicCornerBorder_Option
            x:Name="Border_drawer"
            Background="Transparent"
            IsHitTestVisible="False" />

        <Grid x:Name="Content_grid" Grid.ColumnSpan="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="2*" />
                <RowDefinition Height="20*" />
                <RowDefinition Height="0.5*" />
                <RowDefinition Height="2*" />
                <RowDefinition Height="1.5*" />
            </Grid.RowDefinitions>

            <Grid Grid.Row="1">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="8*" />
                    <ColumnDefinition Width="5*" />
                    <ColumnDefinition Width="2*" />
                    <ColumnDefinition Width="10*" />
                    <ColumnDefinition Width="1.2*" />
                    <ColumnDefinition Width="8*" />
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="3*" />
                    <RowDefinition Height="1.5*" />
                    <RowDefinition Height="3*" />
                    <RowDefinition Height="1.5*" />
                    <RowDefinition Height="3*" />
                    <RowDefinition Height="1.5*" />
                    <RowDefinition Height="3*" />
                </Grid.RowDefinitions>

                <Slider
                    Name="Plot_font_size_Slider"
                    Grid.Row="1"
                    Grid.Column="3"
                    VerticalAlignment="Center"
                    Maximum="200"
                    Minimum="0" />
                <Viewbox
                    Grid.Row="1"
                    Grid.Column="4"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Stretch="Uniform">
                    <Label Content="{Binding ElementName=Plot_font_size_Slider, Path=Value, Converter={StaticResource F2FontSizeToStringConverter}}" Foreground="White" />
                </Viewbox>

                <Slider
                    Name="Plot_print_speed_Slider"
                    Grid.Row="3"
                    Grid.Column="3"
                    VerticalAlignment="Center"
                    Maximum="500"
                    Minimum="0" />
                <Viewbox
                    Grid.Row="3"
                    Grid.Column="4"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Stretch="Uniform">
                    <Label Content="{Binding ElementName=Plot_print_speed_Slider, Path=Value,Converter={StaticResource F0FontSizeToStringConverter} }" Foreground="White" />
                </Viewbox>

                <Slider
                    Name="Music_volume_Slider"
                    Grid.Row="5"
                    Grid.Column="3"
                    VerticalAlignment="Center"
                    Maximum="1"
                    Minimum="0" 
                    TickFrequency="0.01"/>
                <Viewbox
                    Grid.Row="5"
                    Grid.Column="4"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Stretch="Uniform">
                    <Label Content="{Binding ElementName=Music_volume_Slider, Path=Value, Converter={StaticResource Music_FontSizeToStringConverter}}" Foreground="White" />
                </Viewbox>




                <Viewbox
                    Grid.Row="1"
                    Grid.Column="1"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Stretch="Uniform">
                    <Label
                        Grid.Row="1"
                        Grid.Column="1"
                        Content="字体大小"
                        Foreground="White" />
                </Viewbox>
                <Viewbox
                    Grid.Row="3"
                    Grid.Column="1"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Stretch="Uniform">
                    <Label
                        Grid.Row="3"
                        Grid.Column="1"
                        Content="文字输出速度"
                        Foreground="White" />
                </Viewbox>
                <Viewbox
                    Grid.Row="5"
                    Grid.Column="1"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Stretch="Uniform">
                    <Label
                        Grid.Row="5"
                        Grid.Column="1"
                        Content="音乐声音"
                        Foreground="White" />
                </Viewbox>



            </Grid>

            <Grid Grid.Row="3">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="10*" />
                    <ColumnDefinition Width="5*" />
                    <ColumnDefinition Width="10*" />
                </Grid.ColumnDefinitions>

                <Button
                    Name="Save_options"
                    Grid.Column="1"
                    Click="Save_options_Click"
                    Content="保存设置" />
            </Grid>
        </Grid>
    </Grid>
</Page>
